<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- Let browser know website is optimized for mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--  jQuery-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <!-- Firebase Config -->
    <script src="https://www.gstatic.com/firebasejs/4.6.1/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyB5iww-loz_Evzv1Z-kSbOCyuhnIz1I-Ng",
            authDomain: "incognito-f9e47.firebaseapp.com",
            databaseURL: "https://incognito-f9e47.firebaseio.com",
            projectId: "incognito-f9e47",
            storageBucket: "incognito-f9e47.appspot.com",
            messagingSenderId: "516741037588"
        };
        firebase.initializeApp(config);
    </script>
    <!-- FirebaseUI CDN -->
    <script src="https://cdn.firebase.com/libs/firebaseui/2.4.1/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.4.1/firebaseui.css" />
    <link href="https://fonts.googleapis.com/css?family=Aldrich" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet">

    <script>
        // FirebaseUI config.
        var provider = new firebase.auth.GoogleAuthProvider();
        var uiConfig = {
            signInSuccessUrl: 'map.html',
            signInFlow: "popup",
            signInOptions: [
                // Leave the lines as is for the providers you want to offer your users.
                firebase.auth.GoogleAuthProvider.PROVIDER_ID,
                firebase.auth.EmailAuthProvider.PROVIDER_ID
            ],
            // Terms of service url.
            tosUrl: '<your-tos-url>'
        };
        // Initialize the FirebaseUI Widget using Firebase.
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        // The start method will wait until the DOM is loaded.
        ui.start('#firebaseui-auth-container', uiConfig);



        // User authentication change
        firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
                // User is signed in.
                var email = user.email;
                console.log(user);
                $("#accountdetails").text(email);
                $("#signinstatuscontainer").show();
                $("#signInButton").hide();
                $("#signout").show();

            } else {
                // redirects to login
                // window.location = "index.html";
                return;
            }
        });
        // logouts the user
        $("#signout").on("click", function() {
            firebase.auth().signOut();
            $("#signInButton").show();
            $("#signinstatus").hide();
            $("#signout").hide();
        })



        // log in modal
        $(document).ready(function() {
            // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
            $('#loginmodal').modal();
        });
    </script>

    <title>incognito.</title>

    <!-- CSS Links -->

    <!-- Materialize Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <!-- Materilized Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <!-- Google Icon Font  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- CSS File -->
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <!-- Materialize CSS -->
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <!-- Google Fonts  -->
    <link href="https://fonts.googleapis.com/css?family=Monoton" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Geo" rel="stylesheet">
</head>

<body>

    <nav class="black" role="navigation">
        <div class="nav-wrapper container">
            <a id="logo-container" href="index.html" class="brand-logo">MICHAEL'S LOGO</a>
            <ul class="right hide-on-med-and-down" id="navbar">
                <li><a class="waves-effect light-blue darken-2 btn modal-trigger" id="signinbutton" href="#loginmodal">sign in</a></li>
            </ul>
            <ul class="right hide-on-med-and-down" id="navbar">
                <li><a href="profile.html">profile</a></li>
            </ul>
            <ul class="right hide-on-med-and-down" id="navbar">
                <li><a href="map.html">map</a></li>
            </ul>

            <ul id="nav-mobile" class="side-nav">
                <li><a href="index.html">login</a></li>
                <li><a href="profile.html">profile</a></li>
                <li><a href="map.html">map</a></li>
            </ul>
            <a href="" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
        </div>
    </nav>
    <div><br><br><br><br><br><br><br></div>
    <div class="row">
        <div class="col s2">
        </div>
        <div class="col s2">
        </div>
        <div class="row" id="sign">
            <div class="col s2">
                <div id="incognito">
                    <h1> in<span id="offset">cogn</span>ito </h1>
                </div>
            </div>
        </div>

    </div>
    <!-- Modal -->
    <div id="loginmodal" class="modal">
        <div id='firebaseui-auth-container'></div>
    </div>
    </div>
    <!-- Links to Js Files -->
    <script src="js/materialize.js"></script>
    <script src="js/init.js"></script>
</body>

</html>
